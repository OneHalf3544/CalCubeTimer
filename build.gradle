apply plugin: 'java'
apply plugin:'application'

version = '1.0'
sourceCompatibility = 1.7
targetCompatibility = 1.7

jar {
    manifest {
        attributes 'Main-Class': 'net.gnehzr.cct.main.CALCubeTimer'
        attributes 'SplashScreen-Image': ' net/gnehzr/cct/main/battle.jpg'
        attributes 'Built-Date': 'xxxxx'
        attributes 'Class-Path': '.'
    }
    baseName = project.name + '-all'
    from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } }
    //with jar
}

compileJava{
    options.encoding = "UTF-8"
}
repositories {
    mavenCentral()

    flatDir {
        dirs 'lib'
    }
}

dependencies {
    compile('javax.mail:mailapi:1.4.3')
    compile('com.sun.mail:smtp:1.5.2')
    compile('pircbot:pircbot:1.5.0')
    compile('substance:substance')
    compile('javazoom:jlayer:1.0.1')
    compile('plugin:plugin')
}

task createDocs {
    def docs = file("$buildDir/documentation")
    outputs.dir docs
    doLast {
        docs.mkdirs()
        new File(docs, "readme.txt").write("Read me!")
    }
}

applicationDistribution.from(createDocs) {
    into "documentation"
}